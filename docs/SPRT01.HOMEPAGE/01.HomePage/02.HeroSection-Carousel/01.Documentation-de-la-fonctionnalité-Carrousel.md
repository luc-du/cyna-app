# **Documentation de la fonctionnalit√© Carrousel (Accueil)**

**Projet** Cyna ‚Äì Application e-commerce
**Module** `carousel`
**Sprint** SPRT05.13
**Front** React + Redux Toolkit
**Back** API Gateway (route `/carousel`)
**Fallback** Mock local (`MOCKSLIDES`)

---

## Sommaire

1. Objectif de la fonctionnalit√©
2. Analyse de la demande (CDC)
3. R√©ponse apport√©e (architecture, UX, fallback)
4. Fonctionnement technique (Redux, service, UI)
5. Extraits de code comment√©s
6. √âl√©ments diff√©renciateurs & robustesse
7. Axes d'am√©lioration

---

## 1. Objectif de la fonctionnalit√©

Le **carrousel** est le premier √©l√©ment visuel sur la page d'accueil. Il vise √†

- Mettre en avant les **produits ou services phares** de la plateforme.
- Valoriser des **promotions temporaires** ou offres limit√©es.
- Am√©liorer l‚ÄôUX par une **transition visuelle dynamique** et engageante.

---

## 2. üìò Analyse de la demande (CDC)

> Extrait du CDC
>
> > ¬´ La page d‚Äôaccueil doit comporter un carrousel dynamique personnalisable, g√©r√© depuis le back-office. Il affichera une image, un titre, un texte, un bouton de redirection. ¬ª

### Contraintes identifi√©es

| √âl√©ment                  | D√©tail                                       |
| ------------------------ | -------------------------------------------- |
| Dynamique                | Donn√©es issues d'une API d√©di√©e              |
| Personnalisable          | Texte, image, lien CTA modifiables           |
| Fallback en cas d‚Äôerreur | Doit afficher du contenu local               |
| UX fluide                | Transition automatique + navigation manuelle |
| Accessibilit√©            | Pr√©vue (navigation clavier, aria-label)      |

---

## 3. R√©ponse technique apport√©e

| Aspect                  | Impl√©mentation concr√®te                      |
| ----------------------- | -------------------------------------------- |
| **Source dynamique**    | API REST `/carousel` (Swagger valid√©)        |
| **Slice Redux**         | `carouselSlice` avec `createAsyncThunk`      |
| **Fallback**            | Gestion des erreurs + `MOCKSLIDES`           |
| **Interface**           | Composant `Carousel` responsive, transitions |
| **Accessibilit√©**       | `role=region`, `aria-label`, `role=tab`      |
| **CTA personnalisable** | Lien texte + URL dynamique par slide         |

---

## 4. Fonctionnement technique

### 4.1. Appel API via service

```js
export const getCarouselSlides = (limits = 10) => {
  return axios.get(API_ROUTES.CAROUSEL.ALL(limits)).then((res) => res.data);
};
```

---

### 4.2. Slice Redux Toolkit (extrait)

```js
export const fetchCarouselSlides = createAsyncThunk(
  "carousel/fetchAll",
  async (_, { rejectWithValue }) => {
    try {
      const data = await getCarouselSlides();
      if (!Array.isArray(data) || data.length === 0) {
        return rejectWithValue({ isFallback true, fallback MOCKSLIDES });
      }
      return data;
    } catch (err) {
      return rejectWithValue({
        isFallback true,
        fallback MOCKSLIDES,
        message err.response?.data?.message,
      });
    }
  }
);
```

---

### 4.3. UI ‚Äì Composant `Carousel`

```jsx
<div
  className="relative w-full h-96 rounded-lg shadow-md overflow-hidden"
  role="region"
>
  {slides.map((slide, index) =>
    index === currentIndex ? (
      <div key={slide.id} className="absolute inset-0 w-full h-full">
        <img
          src={slide.imageUrl}
          alt={slide.title}
          className="w-full h-full object-fill"
        />
        <div className="absolute inset-0 bg-black bg-opacity-50 flex flex-col justify-center">
          <h2 className="text-3xl text-white font-bold">{slide.title}</h2>
          <p className="text-white mt-2">{slide.description}</p>
          <a
            href={slide.ctaLink}
            className="mt-4 bg-primary text-white px-4 py-2 rounded-md"
          >
            {slide.ctaText}
          </a>
        </div>
      </div>
    )  null
  )}
</div>
```

---

## 5. Robustesse et accessibilit√©

- **Fallback automatique** en cas d‚Äôindisponibilit√© de l‚ÄôAPI.
- **Structure ARIA** (roledescription, region, tablist).
- Navigation clavier possible.
- Responsive d√®s `sm` pour les fl√®ches.
- **Slice isol√©** (`carouselSlice.js`) ‚Üí testabilit√© accrue.

---

## 6. √âl√©ments diff√©renciateurs

| √âl√©ment              | D√©tail                                                             |
| -------------------- | ------------------------------------------------------------------ |
| `createAsyncThunk`   | Gestion centralis√©e de l‚Äô√©tat (`pending`, `fulfilled`, `rejected`) |
| Fallback intelligent | Mock utilis√© uniquement si donn√©es API absentes ou corrompues      |
| S√©paration claire    | `services`, `slice`, `mock`, `component` dissoci√©s                 |
| `DataStatus` int√©gr√© | Affiche automatiquement √©tat loading / empty / error               |

---

## 7. Axes d'am√©lioration futurs

- Gestion de **traductions i18n** du contenu dynamique.
- Ajout d‚Äôun mode **fade (opacit√©)** en alternative au switch brutal.

---
