# Module : Dark Mode ‚Äì Cyna Frontend

**Poste** : `SPRT05.11.FEAT/ui/darkmode-redux`

---

## Objectif

Permettre √† l‚Äôutilisateur d‚Äôactiver ou d√©sactiver le **mode sombre** depuis n‚Äôimporte quelle page, avec :

- Persistance du choix (`localStorage`)
- Application globale (`<html class="dark">`)
- Synchronisation avec le `Redux store`
- Composant `DarkModeToggle` r√©utilisable (`button` ou `switch`)
- Prise en compte du th√®me dans tous les composants principaux (`App`, `Header`, `Form`, `Typography`)

---

## Architecture mise en place

### 1. `uiSlice.js`

- Stocke l‚Äô√©tat `darkMode: boolean`
- Actions : `toggleDarkMode`, `setDarkMode`
- Synchronisation avec `localStorage`
- Application imm√©diate de la classe `.dark` sur le root (`<html>`)

### 2. `DarkModeInitializer.jsx`

- Composant global mont√© au niveau du `main.jsx`
- Applique dynamiquement `.classList.add('dark')` ou `.remove('dark')` sur le `<html>` d√®s le chargement

### 3. `DarkModeToggle.jsx`

- Commutateur accessible avec deux variantes :

  - `button` classique (`‚òÄÔ∏è / üåô`)
  - `switch` stylis√© (label + curseur)

- Comportement :

  - `onClick` ‚Üí `dispatch(toggleDarkMode())`
  - Mise √† jour instantan√©e du `Redux store` et du DOM

---

## Adaptations de style

### Tailwind config :

```js
darkMode: "class";
```

### Classes utilitaires mises √† jour :

- `h1, h2, h3` ‚Üí ajout de `dark:text-white`
- `p` ‚Üí `text-primary dark:text-white` (ou `!text-white` si besoin de forcer)
- `form`, `input`, `.container-profile-section` ‚Üí ajout de `dark:bg-gray-*` et `dark:text-white`
- `App.jsx`, `Header.jsx`, `Footer.jsx`, `Modal`, `Profile`, `TabSettings` ‚Üí utilisation de `dark:` sur le fond, le texte et les √©l√©ments interactifs

---

## Accessibilit√©

- `aria-label` sur le bouton ou switch : `"Passer en mode sombre"` / `"clair"`
- Contraste respect√© via Tailwind (`dark:text-white`, `dark:bg-gray-800`, etc.)

---

## Tests r√©alis√©s

- [x] Toggle dans le `Header` : OK
- [x] Application sur toute l‚Äôinterface (`App`, `Profile`, `Settings`, `Modals`, etc.)
- [x] Persistance du th√®me apr√®s rechargement
- [x] Accessibilit√© clavier + screen reader
- [x] Non r√©gression visuelle sur les composants existants

---

## Limites connues

- Si un composant utilise `text-primary` en dur sans `dark:`, il peut n√©cessiter un `!important` ou une surcharge par `dark:!text-white`
- Les assets (logos, images SVG inline) ne changent pas automatiquement : √† voir si besoin d‚Äôadaptation ult√©rieure

---

## Propositions d‚Äô√©volution

- Sauvegarde dans le backend du th√®me utilisateur (si connect√©)
- D√©tection automatique du `prefers-color-scheme` (mode syst√®me)
- Animation douce lors du changement (CSS transition sur `bg`, `text`, etc.)

---
